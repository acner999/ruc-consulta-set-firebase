<!DOCTYPE html>
<html>
<head>
    <title>CryptoJS AES Encryption/Decryption</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script>
        function encrypt(ruc, dv) {
            var tmp = ' {"ruc":"4712690","dv":"6"}';
            var key = CryptoJS.enc.Base64.parse('aCIbjMuVGtwF8nlSKoPydE==');
            var iv = CryptoJS.enc.Base64.parse('JAwlt7SNbYLycmPRqeDFou==');
            
            var encrypted = CryptoJS.AES.encrypt(tmp, key, {
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7,
                iv: iv
            });

            console.log("Encrypted: ", encrypted.toString());
            return encrypted.toString();
        }

        function decrypt(encryptedText) {
            var key = CryptoJS.enc.Base64.parse('aCIbjMuVGtwF8nlSKoPydE==');
            var iv = CryptoJS.enc.Base64.parse('JAwlt7SNbYLycmPRqeDFou==');
            
            var decrypted = CryptoJS.AES.decrypt(encryptedText, key, {
                mode: CryptoJS.mode.CBC,
                padding: CryptoJS.pad.Pkcs7,
                iv: iv
            });

            var decryptedText = decrypted.toString(CryptoJS.enc.Utf8);
            console.log("Decrypted: ", decryptedText);
            return decryptedText;
        }

        var consulta = encrypt()
        url = "https://servicios.set.gov.py/eset-publico/timbrado/validezDocumento/contribuyente?t3="+consulta

        document.addEventListener("DOMContentLoaded", function() {
            var encryptedText = encrypt();
            decrypt(encryptedText);
        });
        //url = https://servicios.set.gov.py/eset-publico/timbrado/validezDocumento/contribuyente?t3=hQzY/2b3eh6XSatskrYlN6I4MOvHWI02GPBo3p16HsA=
    </script>
</head>
<body>
</body>
</html>